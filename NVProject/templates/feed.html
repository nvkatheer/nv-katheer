{% extends 'base.html' %}

{% block title %}Feed - NV Poultry Farm{% endblock %}

{% block content %}
<div class="container-fluid mt-4 px-2 px-md-4">

    <!-- Tab Navigation -->
    <div class="row mb-4">
        <div class="col-12">
            <ul class="nav nav-tabs feed-tabs" id="feedTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="dashboard-tab" data-bs-toggle="tab" data-bs-target="#dashboard" type="button" role="tab" aria-controls="dashboard" aria-selected="true">
                        <i class="fas fa-chart-line me-2"></i><span class="d-none d-sm-inline">Dashboard</span>
                    </button>
                </li>
                {% for group in user_groups %}
                {% if group.name == 'admin'%}
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="add-stock-tab" data-bs-toggle="tab" data-bs-target="#add-stock" type="button" role="tab" aria-controls="add-stock" aria-selected="false">
                        <i class="fas fa-plus-circle me-2"></i><span class="d-none d-sm-inline">Add Stock</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="entries-tab" data-bs-toggle="tab" data-bs-target="#entries" type="button" role="tab" aria-controls="entries" aria-selected="false">
                        <i class="fas fa-list me-2"></i><span class="d-none d-sm-inline">Entries</span>
                    </button>
                </li>
                {% endif %}
                {% endfor %}
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="report-tab" data-bs-toggle="tab" data-bs-target="#report" type="button" role="tab" aria-controls="report" aria-selected="false">
                        <i class="fas fa-file-excel me-2"></i><span class="d-none d-sm-inline">Report</span>
                    </button>
                </li>
            </ul>
        </div>
    </div>

    <!-- Tab Content -->
    <div class="tab-content" id="feedTabContent">
        
        <!-- Dashboard Tab -->
        <div class="tab-pane fade show active" id="dashboard" role="tabpanel" aria-labelledby="dashboard-tab">
            <div class="card feed-card">
                <div class="card-header feed-card-header bg-gradient-primary">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <h5 class="mb-0"><i class="fas fa-tachometer-alt me-2"></i>Feed Stock Dashboard</h5>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex justify-content-md-end align-items-center flex-wrap">
                                <label for="dashboardDate" class="me-2 mb-2 mb-md-0">Select Date:</label>
                                <input type="date" id="dashboardDate" class="form-control form-control-sm" style="max-width: 200px;">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row" id="stockDashboard">
                        <!-- Stock metrics will be populated by JavaScript -->
                        <div class="col-12 text-center">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Stock Tab -->
        <div class="tab-pane fade" id="add-stock" role="tabpanel" aria-labelledby="add-stock-tab">
            <div class="card feed-card">
                <div class="card-header feed-card-header bg-gradient-success">
                    <h5 class="mb-0"><i class="fas fa-boxes me-2"></i>Add Feed Stock Entry</h5>
                </div>
                <div class="card-body">
                    <form id="feedStockForm">
                        {% csrf_token %}
                        <input type="hidden" id="feedStockId" name="feed_stock_id" value="">
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="feedDate" class="form-label fw-bold">Date <span class="text-danger">*</span></label>
                                <input type="date" class="form-control form-control-lg" id="feedDate" name="date" required>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="feedKg" class="form-label fw-bold">Weight in KG <span class="text-danger">*</span></label>
                                <input type="number" class="form-control form-control-lg" id="feedKg" name="kg" step="0.01" required 
                                       placeholder="Enter weight in KG" min="0">
                                <small class="form-text text-muted d-block mt-1">1 bundle = 60 KG</small>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="feedBundles" class="form-label fw-bold">Bundles</label>
                                <input type="number" class="form-control form-control-lg" id="feedBundles" name="bundles" step="0.01" 
                                       placeholder="Enter bundles or auto-calculated from KG" min="0">
                                <small class="form-text text-muted d-block mt-1">1 bundle = 60 KG</small>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="feedNotes" class="form-label fw-bold">Notes</label>
                                <textarea class="form-control" id="feedNotes" name="notes" rows="2" placeholder="Add any notes..."></textarea>
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex">
                            <button type="submit" class="btn btn-success btn-lg flex-md-grow-1">
                                <i class="fas fa-save me-2"></i>Save Feed Stock
                            </button>
                            <button type="reset" class="btn btn-outline-secondary btn-lg flex-md-grow-1" id="resetBtn">
                                <i class="fas fa-redo me-2"></i>Clear Form
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Entries Tab -->
        <div class="tab-pane fade" id="entries" role="tabpanel" aria-labelledby="entries-tab">
            <div class="card feed-card">
                <div class="card-header feed-card-header bg-gradient-info">
                    <h5 class="mb-0"><i class="fas fa-inbox me-2"></i>Recent Feed Stock Entries</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover table-striped">
                            <thead class="table-dark">
                                <tr>
                                    <th>Date</th>
                                    <th>KG</th>
                                    <th>Bundles</th>
                                    <th class="text-center">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="feedStockTableBody">
                                <!-- Populated by JavaScript -->
                                <tr>
                                    <td colspan="4" class="text-center text-muted">Loading entries...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Report Tab -->
        <div class="tab-pane fade" id="report" role="tabpanel" aria-labelledby="report-tab">
            <div class="card feed-card">
                <div class="card-header feed-card-header bg-gradient-warning">
                    <h5 class="mb-0"><i class="fas fa-chart-bar me-2"></i>Feed Stock Report</h5>
                </div>
                <div class="card-body">
                    <div class="row mb-4">
                        <div class="col-md-5">
                            <label for="reportStartDate" class="form-label fw-bold">Start Date <span class="text-danger">*</span></label>
                            <input type="date" id="reportStartDate" class="form-control form-control-lg">
                        </div>
                        <div class="col-md-5">
                            <label for="reportEndDate" class="form-label fw-bold">End Date <span class="text-danger">*</span></label>
                            <input type="date" id="reportEndDate" class="form-control form-control-lg">
                        </div>
                        <div class="col-md-2 d-flex align-items-end">
                            <button class="btn btn-primary btn-lg w-100" onclick="loadReportData()">
                                <i class="fas fa-search me-2"></i>Load
                            </button>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-12">
                            <button class="btn btn-success btn-lg" id="downloadExcelBtn" disabled>
                                <i class="fas fa-download me-2"></i>Download Excel Report
                            </button>
                        </div>
                    </div>

                    <div class="table-responsive">
                        <table class="table table-hover table-striped">
                            <thead class="table-dark">
                                <tr>
                                    <th>Date</th>
                                    <th>KG</th>
                                    <th>Bundles</th>
                                    <th>Notes</th>
                                </tr>
                            </thead>
                            <tbody id="reportTableBody">
                                <!-- Populated by JavaScript -->
                                <tr>
                                    <td colspan="4" class="text-center text-muted">Select date range and click Load to view data</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="row mt-4" id="reportSummary" style="display: none;">
                        <div class="col-md-3">
                            <div class="card text-center border-primary">
                                <div class="card-body">
                                    <h6 class="card-title text-muted">Total KG</h6>
                                    <h4 class="text-primary" id="totalKg">0</h4>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center border-success">
                                <div class="card-body">
                                    <h6 class="card-title text-muted">Total Bundles</h6>
                                    <h4 class="text-success" id="totalBundles">0</h4>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center border-info">
                                <div class="card-body">
                                    <h6 class="card-title text-muted">Number of Entries</h6>
                                    <h4 class="text-info" id="totalEntries">0</h4>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center border-warning">
                                <div class="card-body">
                                    <h6 class="card-title text-muted">Average per Day</h6>
                                    <h4 class="text-warning" id="averageKg">0</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
    // Set today's date as default
    document.getElementById('feedDate').valueAsDate = new Date();
    document.getElementById('dashboardDate').valueAsDate = new Date();

    // Load dashboard data on page load
    loadDashboardData();
    loadFeedStockEntries();

    // Handle dashboard date change
    document.getElementById('dashboardDate').addEventListener('change', loadDashboardData);

    // Load and display dashboard metrics
    function loadDashboardData() {
        const date = document.getElementById('dashboardDate').value;
        fetch(`/feed-stock-dashboard/?date=${date}`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                displayDashboard(data.data);
            } else {
                console.error('Error:', data.message);
            }
        })
        .catch(error => console.error('Error:', error));
    }

    // Display dashboard metrics
    function displayDashboard(data) {
        const dashboard = document.getElementById('stockDashboard');
        dashboard.innerHTML = `
            <div class="col-md-3">
                <div class="card text-center border-info">
                    <div class="card-body">
                        <h6 class="card-title text-muted">Today's Usage</h6>
                        <h4 class="text-info">${data.today_feed_used_kg} KG</h4>
                        <small class="text-muted">${data.today_feed_used_bundles} Bundles</small>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center border-primary">
                    <div class="card-body">
                        <h6 class="card-title text-muted">Daily Closing Stock</h6>
                        <h4 class="text-primary">${data.closing_stock_kg} KG</h4>
                        <small class="text-muted">${data.closing_stock_bundles} Bundles</small>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center border-success">
                    <div class="card-body">
                        <h6 class="card-title text-muted">Total Stock Received</h6>
                        <h4 class="text-success">${data.total_stock_received_kg} KG</h4>
                        <small class="text-muted">${data.total_stock_received_bundles} Bundles</small>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center border-danger">
                    <div class="card-body">
                        <h6 class="card-title text-muted">Total Feed Used</h6>
                        <h4 class="text-danger">${data.total_feed_used_kg} KG</h4>
                        <small class="text-muted">${data.total_feed_used_bundles} Bundles</small>
                    </div>
                </div>
            </div>
            
            
        `;
    }

    // Auto-calculate bundles when KG is entered
    document.getElementById('feedKg').addEventListener('input', function() {
        const kg = parseFloat(this.value) || 0;
        const bundles = (kg / 60).toFixed(2);
        document.getElementById('feedBundles').value = bundles;
    });

    // Auto-calculate KG when bundles is entered
    document.getElementById('feedBundles').addEventListener('input', function() {
        const bundles = parseFloat(this.value) || 0;
        const kg = (bundles * 60).toFixed(2);
        document.getElementById('feedKg').value = kg;
    });

    // Load feed stock entries on page load
    loadFeedStockEntries();

    // Handle form submission
    document.getElementById('feedStockForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const feedStockId = document.getElementById('feedStockId').value;
        const date = document.getElementById('feedDate').value;
        const kg = parseFloat(document.getElementById('feedKg').value);
        const bundles = parseFloat(document.getElementById('feedBundles').value);
        const notes = document.getElementById('feedNotes').value;

        if (!date || !kg) {
            alert('Please fill in all required fields');
            return;
        }

        const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
        const formData = new FormData();
        formData.append('date', date);
        formData.append('kg', kg);
        formData.append('bundles', bundles);
        formData.append('notes', notes);
        if (feedStockId) {
            formData.append('feed_stock_id', feedStockId);
        }

        fetch('/feed-stock-save/', {
            method: 'POST',
            headers: {
                'X-CSRFToken': csrftoken
            },
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert(data.message);
                document.getElementById('feedStockForm').reset();
                document.getElementById('feedStockId').value = '';
                document.getElementById('feedDate').valueAsDate = new Date();
                loadFeedStockEntries();
                loadDashboardData();
            } else {
                alert('Error: ' + data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while saving');
        });
    });

    // Load and display recent feed stock entries
    function loadFeedStockEntries() {
        fetch('/feed-stock-list/')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const tbody = document.getElementById('feedStockTableBody');
                tbody.innerHTML = '';
                data.entries.forEach(entry => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${entry.date}</td>
                        <td>${entry.kg}</td>
                        <td>${entry.bundles}</td>
                        <td>
                            <button class="btn btn-sm btn-warning" onclick="editFeedStock(${entry.id})">Edit</button>
                            <button class="btn btn-sm btn-danger" onclick="deleteFeedStock(${entry.id})">Delete</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }
        })
        .catch(error => console.error('Error:', error));
    }

    // Edit feed stock entry
    function editFeedStock(id) {
        fetch(`/feed-stock-get/${id}/`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                document.getElementById('feedStockId').value = data.entry.id;
                document.getElementById('feedDate').value = data.entry.date;
                document.getElementById('feedKg').value = data.entry.kg;
                document.getElementById('feedBundles').value = data.entry.bundles;
                document.getElementById('feedNotes').value = data.entry.notes;
                
                // Navigate to Add Stock tab
                const addStockTab = new bootstrap.Tab(document.getElementById('add-stock-tab'));
                addStockTab.show();
                
                // Scroll to top
                window.scrollTo(0, 0);
            }
        })
        .catch(error => console.error('Error:', error));
    }

    // Delete feed stock entry
    function deleteFeedStock(id) {
        if (confirm('Are you sure you want to delete this entry?')) {
            const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
            fetch(`/feed-stock-delete/${id}/`, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': csrftoken
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Entry deleted successfully');
                    loadFeedStockEntries();
                    loadDashboardData();
                } else {
                    alert('Error: ' + data.message);
                }
            })
            .catch(error => console.error('Error:', error));
        }
    }

    // Reset form handler
    document.getElementById('resetBtn').addEventListener('click', function() {
        document.getElementById('feedStockId').value = '';
        document.getElementById('feedDate').valueAsDate = new Date();
    });

    // Initialize report dates with a default range (last 30 days)
    const today = new Date();
    const thirtyDaysAgo = new Date(today.getTime() - (30 * 24 * 60 * 60 * 1000));
    document.getElementById('reportEndDate').valueAsDate = today;
    document.getElementById('reportStartDate').valueAsDate = thirtyDaysAgo;

    // Load report data
    function loadReportData() {
        const startDate = document.getElementById('reportStartDate').value;
        const endDate = document.getElementById('reportEndDate').value;

        if (!startDate || !endDate) {
            alert('Please select both start and end dates');
            return;
        }

        if (new Date(startDate) > new Date(endDate)) {
            alert('Start date must be before end date');
            return;
        }

        fetch(`/feed-stock-report-data/?start_date=${startDate}&end_date=${endDate}`)
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                displayReportData(data.entries);
                document.getElementById('downloadExcelBtn').disabled = false;
            } else {
                alert('Error: ' + data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while loading report data');
        });
    }

    // Display report data in table and calculate summary
    function displayReportData(entries) {
        const tbody = document.getElementById('reportTableBody');
        tbody.innerHTML = '';

        if (entries.length === 0) {
            tbody.innerHTML = '<tr><td colspan="4" class="text-center text-muted">No entries found for the selected date range</td></tr>';
            document.getElementById('reportSummary').style.display = 'none';
            return;
        }

        let totalKg = 0;
        let totalBundles = 0;

        entries.forEach(entry => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${entry.date}</td>
                <td>${entry.kg}</td>
                <td>${entry.bundles}</td>
                <td>${entry.notes || '-'}</td>
            `;
            tbody.appendChild(row);
            totalKg += parseFloat(entry.kg);
            totalBundles += parseFloat(entry.bundles);
        });

        // Calculate and display summary
        const uniqueDays = new Set(entries.map(e => e.date)).size;
        const averageKg = (totalKg / uniqueDays).toFixed(2);

        document.getElementById('totalKg').innerText = totalKg.toFixed(2);
        document.getElementById('totalBundles').innerText = totalBundles.toFixed(2);
        document.getElementById('totalEntries').innerText = entries.length;
        document.getElementById('averageKg').innerText = averageKg + ' KG';

        document.getElementById('reportSummary').style.display = 'grid';
    }

    // Download report as Excel
    document.getElementById('downloadExcelBtn').addEventListener('click', function() {
        const startDate = document.getElementById('reportStartDate').value;
        const endDate = document.getElementById('reportEndDate').value;

        if (!startDate || !endDate) {
            alert('Please select date range first');
            return;
        }

        window.location.href = `/feed-stock-download-excel/?start_date=${startDate}&end_date=${endDate}`;
    });
</script>

<style>
    :root {
        --primary-color: #007bff;
        --success-color: #28a745;
        --info-color: #17a2b8;
        --warning-color: #ffc107;
        --danger-color: #dc3545;
    }

    body {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        min-height: 100vh;
    }

    .feed-title {
        font-size: 2rem;
        font-weight: 700;
        color: #2c3e50;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .feed-tabs {
        border: none;
        background: white;
        border-radius: 12px;
        padding: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        flex-wrap: nowrap;
        overflow-x: auto;
    }

    .feed-tabs .nav-link {
        border: none;
        border-radius: 8px;
        color: #6c757d;
        font-weight: 600;
        padding: 10px 16px;
        transition: all 0.3s ease;
        white-space: nowrap;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .feed-tabs .nav-link:hover {
        background-color: #f0f0f0;
        color: #495057;
    }

    .feed-tabs .nav-link.active {
        background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
        color: white;
        box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
    }

    .feed-card {
        border: none;
        border-radius: 12px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        overflow: hidden;
    }

    .feed-card:hover {
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    }

    .feed-card-header {
        padding: 20px;
        border: none;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .bg-gradient-primary {
        background: linear-gradient(135deg, #007bff 0%, #0056b3 100%) !important;
    }

    .bg-gradient-success {
        background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%) !important;
    }

    .bg-gradient-info {
        background: linear-gradient(135deg, #17a2b8 0%, #0c5460 100%) !important;
    }

    .bg-gradient-warning {
        background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%) !important;
    }

    .card-body {
        padding: 25px;
    }

    .form-control-lg,
    .btn-lg {
        padding: 12px 16px;
        font-size: 1rem;
        border-radius: 8px;
    }

    .form-label {
        color: #2c3e50;
        margin-bottom: 8px;
    }

    .btn {
        border-radius: 8px;
        padding: 10px 20px;
        font-weight: 600;
        transition: all 0.3s ease;
        border: none;
    }

    .btn-primary:hover,
    .btn-success:hover,
    .btn-warning:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .btn-outline-secondary {
        color: #6c757d;
        border: 2px solid #6c757d;
    }

    .btn-outline-secondary:hover {
        background-color: #6c757d;
        color: white;
    }

    .table {
        margin-bottom: 0;
    }

    .table thead th {
        font-weight: 700;
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 0.5px;
        vertical-align: middle;
        border: none;
    }

    .table tbody tr {
        border-color: #e9ecef;
        transition: all 0.2s ease;
    }

    .table tbody tr:hover {
        background-color: #f8f9fa;
        box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
    }

    .table-responsive {
        border-radius: 8px;
        overflow: hidden;
    }

    .border-success {
        border-left: 5px solid #28a745 !important;
    }

    .border-danger {
        border-left: 5px solid #dc3545 !important;
    }

    .border-info {
        border-left: 5px solid #17a2b8 !important;
    }

    .border-primary {
        border-left: 5px solid #007bff !important;
    }

    .border-warning {
        border-left: 5px solid #ffc107 !important;
    }

    .alert-info {
        background-color: #cfe2ff;
        border: 1px solid #b6d4fe;
        color: #084298;
        border-radius: 8px;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
        .feed-title {
            font-size: 1.5rem;
        }

        .feed-tabs {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .feed-tabs .nav-link {
            padding: 8px 12px;
            font-size: 0.85rem;
        }

        .card-body {
            padding: 15px;
        }

        .form-control-lg,
        .btn-lg {
            padding: 10px 12px;
            font-size: 0.95rem;
        }

        .table {
            font-size: 0.9rem;
        }

        .d-grid {
            gap: 0.5rem !important;
        }

        .btn {
            padding: 8px 12px;
            font-size: 0.9rem;
        }
    }

    @media (max-width: 576px) {
        .feed-title {
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }

        .feed-tabs .nav-link {
            padding: 6px 8px;
            font-size: 0.75rem;
        }

        .feed-tabs .nav-link i {
            margin-right: 0.25rem !important;
        }

        .card-body {
            padding: 12px;
        }

        .card-header {
            padding: 15px !important;
        }

        .form-control-lg,
        .btn-lg {
            padding: 8px 10px;
            font-size: 0.9rem;
        }

        .btn {
            padding: 6px 10px;
            font-size: 0.85rem;
        }

        .table {
            font-size: 0.8rem;
        }

        .table thead th {
            padding: 0.5rem;
        }

        .table tbody td {
            padding: 0.5rem;
        }

        .col-md-3,
        .col-md-4,
        .col-md-6 {
            margin-bottom: 1rem;
        }
    }

    /* Tab content animations */
    .tab-pane {
        animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(5px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .spinner-border {
        width: 2rem;
        height: 2rem;
    }

    .flex-md-grow-1 {
        flex: 1;
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: #f1f1f1;
    }

    ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: #555;
    }
</style>
{% endblock %}
